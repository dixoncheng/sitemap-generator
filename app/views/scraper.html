<div class="jumbotron" ng-hide="scraping">

  <img src="images/karl.png" class="logo" alt="I'm Karl">
  <br>

  <h1>Website Scraper!</h1>

  <p class="lead">
    I will scrape data from a website.
    <br>
    <small>I can be used once or scheduled to run automatically.</small>
    <Br>
  </p>

  <div class="alert alert-danger alert-dismissible" role="alert" ng-show="error">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
    <strong>Error!</strong> {{msg}}
  </div>

  <div class="alert alert-success alert-dismissible" role="alert" ng-show="success">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
    <strong>Success!</strong> {{msg}}
  </div>

  <p>
    <div class="form-group">
      <label for="url">Target URL</label>
      <input class="form-control" ng-model="targetUrl" id="url" placeholder="http://botmap.io/about">
      <br>
      <label for="selector">Target Element Id or Class (selector)</label>
      <input class="form-control" ng-model="targetSelector" id="selector" placeholder="element-class-name">
      <br>
      <label for="automate">Automate/Schedule Daily Job
        <span ng-hide="profile.user_metadata.subscription">(Upgrade Required)</span>
      </label>
      <input ng-model="automate" id="automate" ng-disabled="!profile.user_metadata.subscription" type="checkbox">
      <div ng-show="automate">
        <br>
        <input type="text" id="time" ng-model="time" placeholder="Time">
        <br>
        <br>
        <label for="email">Destination Email</label>
        <input class="form-control" ng-model="email" id="email" type="email" placeholder="your-name@gmail.com">
        <br>
        <label for="name">Name Your Job</label>
        <input class="form-control" ng-model="name" id="name" placeholder="My Job!">
      </div>
      <br>
    </div>
    <a class="btn btn-lg btn-success" ng-click="go()" ng-disabled="goDisabled()" ng-hide="scraping" ng-href="javascript:void(0)">
      GO
      <span class="glyphicon {{statusIcon}}"></span>
    </a>
    <br>
    <br>
  </p>
</div>


<!-- Add or remove "with-glare" class. Removing the glare makes the screen interactive -->
<div class="css-mb" ng-show="scraping">
  <div class="mb-display-position">
    <div class="mb-display">
      <div class="mb-screen-position">
        <div class="mb-screen">
          <div class="overlay">
            <span class="glitch mainglitch" ng-hide="complete">scraping</span>
            <span class="glitch" ng-hide="complete">
              <small>{{currentUrl}}</small>
            </span>
            <span class="glitch mainglitch" ng-show="complete">Finished</span>
            <a class="btn btn-lg btn-danger" ng-click="cancel()" ng-href="" ng-hide="complete">Cancel
              <span class="glyphicon glyphicon-cog glyphicon-spin"></span>
            </a>
          </div>
          <div ng-bind-html="preview" id="preview" style="width: 100%; height: 100%;"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="mb-body"></div>
  <div class="mb-bottom-cover"></div>
</div>

<div ng-show="complete" id="result" ng-bind-html="dataResult" style="border: 1px solid #000; padding:20px; margin-top:60px;"></div>

<div ng-show="profile.user_metadata.subscription">
  <br>
  <table class="table">
    <thead>
      <tr>
        <th>
          Job
        </th>
        <th>
          URL
        </th>
        <th>Selector
        </th>
        <th>Time</th>
        <th>
          Email
        </th>
        <th>

        </th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="job in profile.user_metadata.jobs track by $index">
        <td>
          {{job.name}}
        </td>
        <td>
          {{job.url}}
        </td>
        <td>
          {{job.selector}}
        </td>
        <td>
          {{job.time}}
        </td>
        <td>
          {{job.email}}
        </td>
        <td>
          <a href="javascript:void(0);" ng-click="delete(job.name)">
            <span class="glyphicon glyphicon-remove"></span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="row marketing">
  <h3>What's so special about this website scraper?</h3>
  <p>
    BotMap scrapes a site as if it was a real person browsing a site, not like a server side CURL or standard xHttp request.
    <strong>This crawler will execute your javascript.</strong>.
  </p>

  <!--
  <h4>How to use this scraper</h4>
  <p>
    In order for the crawler to properly scan your website BotMap needs permission to crawl your site. Place this script at the
    bottom of your site before the closing body tag to give BotMap permission to crawl your site. You can remove this script
    after your sitemap is generated.
  </p>

  <h4>Common Issues</h4>
  <p>
    <ul>
      <li>The script above must be included on all the pages of your website. Placing it in the footer before the closing body
        tag is best practice.</li>
      <li>Passing the "X-Frame-Options" header will prevent the crawler from working properly. Please make sure you are not passing
        this header back in your page responses.</li>
      <li>The sitemap generator may experience problems on pages that take longer than 10 seconds to load. In order to crawl
        javascript initiated content the crawler simulates browser behavior.</li>
      <li>BotMap.io has been tested in Chrome &amp; Firefox.</li>
    </ul>
  </p>
-->
  <p>
    <a href="mailto:karl@webksd.com">Email me</a> if you find a bug or have a question.
  </p>

  <!-- Begin MailChimp Signup Form -->
  <br>
  <br>
  <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
  <style type="text/css">
    #mc_embed_signup {
      background: transparent;
      clear: left;
      font: 14px Helvetica, Arial, sans-serif;
      width: 100%;
    }

    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
         We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
  </style>
  <div id="mc_embed_signup">
    <form action="https://wescms.us7.list-manage.com/subscribe/post?u=81486f81685beb71289ee6fe1&amp;id=88fddba231" method="post"
      id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <div id="mc_embed_signup_scroll">
        <label for="mce-EMAIL">Get Notified of Bufixes and Updates</label>
        <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true">
          <input type="text" name="b_81486f81685beb71289ee6fe1_88fddba231" tabindex="-1" value="">
        </div>
        <div class="clear">
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
      </div>
    </form>
  </div>
  <br>
  <br>
  <!--End mc_embed_signup-->

</div>